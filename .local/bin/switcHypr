#!/bin/sh
# WWW          : https://github.com/wwwsensor/dotfiles
# Author       : @sensor @ss
# Dependencies : busybox | coreutils, grep, sh
#
# Script to not rely in ttys to fix something and
# therefore improve performance starting only one
# tty at boot.
#
# $DIF must be present in $TWO.

# Handle errors
senderr(){ echo switcHypr: "$@";exit 1; }

# Files
ONE=~/.config/hypr/hyprland.conf
TWO=~/.config/hypr/hyprland2.conf
TMP=~/.cache/hyprland.conf

# Difference
DIF="MNBVCXZ"

# Error if $TWO or $ONE not found
[ -e "$TWO" ] || senderr Conf 2 not found
[ -e "$ONE" ] || senderr Conf 1 not found

# Main
mkdir "$(dirname "$TMP")" -p &&

grep "$DIF" "$ONE" -q &&
cp "$TMP" "$ONE" -f &&
exit
cp "$ONE" "$TMP" -f &&
cp "$TWO" "$ONE" -f
