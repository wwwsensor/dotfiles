#!/bin/sh
# WWW          : https://github.com/wwwsensor/dotfiles
# Author       : @sensor @ss
# Dependencies : paru
#
# Post Dotfiles Manager script.

# Notable variables
N=/dev/null

# Handle errors
senderr(){ echo dmpost: "$@";exit 1; }

# Handle dependencies
which paru >$N 2>&1 || senderr paru not found

# SW
paru -Sy --needed --noconfirm doasedit-alternative opendoas >$N 2>&1

# Config
## Sudo
sudo ln -sf $(which doas >$N 2>&1) /usr/bin/sudo

## ZDOTDIR
DIR=/etc/zsh
sudo mkdir -p $DIR && sudo touch $DIR/zshenv
grep ZDOTDIR $DIR/zshenv ||
echo "export ZDOTDIR=~/.config/zsh" | sudo tee -ap $DIR/zshenv
