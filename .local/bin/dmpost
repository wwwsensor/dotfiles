#!/bin/sh
# WWW          : https://github.com/wwwsensor/dotfiles
# Author       : @sensor @ss
# Dependencies : paru
#
# Post Dotfiles Manager script

# Notable variables
N=/dev/null

# Handle errors
senderr(){ echo dmpost: "$@";exit 1; }

# Handle dependencies
which paru >$N || senderr doas not found

# SW
paru -S doasedit-alternative opendoas
paru -Rn base-devel sudo

# Sys config
## zsh
ZSHE=/etc/zsh/zshenv
[ -f $ZSHE ] && {
  STR="export ZDOTDIR=~/.config/zsh"
  grep -q "$STR" $ZSHE ||
  echo "$STR" | doas tee -a $ZSHE >$N
}

## Super user
doas ln -s $(which doas) /usr/bin/sudo
